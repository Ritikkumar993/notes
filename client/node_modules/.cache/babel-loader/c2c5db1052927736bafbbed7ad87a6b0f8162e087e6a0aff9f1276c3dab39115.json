{"ast":null,"code":"import React,{useState}from\"react\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{formatDate}from\"../../../utils/formatDate\";import utils from\"../../../utils/localstorage\";import Button from\"../../../components/atoms/button\";import styles from\"./note.module.scss\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Note(props){const{text,date,color}=props;const[expand,setExpand]=useState(false);const[noteText,setNoteText]=useState(\"\");const handleSave=()=>{const authToken=utils.getFromLocalStorage(\"auth_key\");if(!authToken)toast.error(\"User should be authentic!\");if(!noteText.length||noteText.split(\" \").length<2)toast.error(\"Notes text should atleast contain 2 words!\");fetch(\"http://localhost:8080/api/notes\",{headers:{\"Content-Type\":\"application/json\",authorization:authToken},body:JSON.stringify({text:noteText,color}),method:\"POST\"}).then(res=>res.json()).then(data=>{if((data===null||data===void 0?void 0:data.success)===200){toast.success(\"Notes added successfully!\");}else{toast.error(data===null||data===void 0?void 0:data.message);}}).catch(err=>{console.log(err);toast.error(\"Notes creation failed!\");});};return/*#__PURE__*/_jsxs(\"article\",{className:styles.container,style:{backgroundColor:color},children:[/*#__PURE__*/_jsx(\"div\",{children:!text.length?/*#__PURE__*/_jsx(\"textarea\",{value:noteText,onChange:e=>setNoteText(e.target.value),className:styles.textarea}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:expand?styles.expanded:\"\",children:text.substring(0,154)}),text.length>154?/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setExpand(prev=>!prev),children:[\"Read \",expand?\"less\":\"more\"]}):null]})}),/*#__PURE__*/_jsxs(\"footer\",{className:styles.footer,children:[/*#__PURE__*/_jsx(\"div\",{children:formatDate(date)}),noteText.length?/*#__PURE__*/_jsx(Button,{text:\"save\",className:styles.saveBtn,handleClick:handleSave}):null]})]});}export default Note;","map":{"version":3,"names":["React","useState","toast","formatDate","utils","Button","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Note","props","text","date","color","expand","setExpand","noteText","setNoteText","handleSave","authToken","getFromLocalStorage","error","length","split","fetch","headers","authorization","body","JSON","stringify","method","then","res","json","data","success","message","catch","err","console","log","className","container","style","backgroundColor","children","value","onChange","e","target","textarea","expanded","substring","onClick","prev","footer","saveBtn","handleClick"],"sources":["C:/Users/Ritik kumar/Downloads/Note.me-main/Note.me/client/src/components/card/note/index.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { formatDate } from \"../../../utils/formatDate\";\r\nimport utils from \"../../../utils/localstorage\";\r\nimport Button from \"../../../components/atoms/button\";\r\nimport styles from \"./note.module.scss\";\r\n\r\nfunction Note(props) {\r\n  const { text, date, color } = props;\r\n  const [expand, setExpand] = useState(false);\r\n  const [noteText, setNoteText] = useState(\"\");\r\n\r\n  const handleSave = () => {\r\n    const authToken = utils.getFromLocalStorage(\"auth_key\");\r\n\r\n    if(!authToken) toast.error(\"User should be authentic!\")\r\n\r\n    if (!noteText.length || noteText.split(\" \").length < 2 )\r\n      toast.error(\"Notes text should atleast contain 2 words!\");\r\n\r\n    fetch(\"http://localhost:8080/api/notes\", {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        authorization: authToken,\r\n      },\r\n      body: JSON.stringify({\r\n        text: noteText,\r\n        color,\r\n      }),\r\n      method: \"POST\",\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data?.success === 200) {\r\n          toast.success(\"Notes added successfully!\");\r\n        } else {\r\n          toast.error(data?.message);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        toast.error(\"Notes creation failed!\");\r\n      });\r\n  };\r\n\r\n  return (\r\n    <article className={styles.container} style={{ backgroundColor: color }}>\r\n      <div>\r\n        {!text.length ? (\r\n          <textarea\r\n            value={noteText}\r\n            onChange={(e) => setNoteText(e.target.value)}\r\n            className={styles.textarea}\r\n          />\r\n        ) : (\r\n          <>\r\n            <p className={expand ? styles.expanded : \"\"}>\r\n              {text.substring(0, 154)}\r\n            </p>\r\n            {text.length > 154 ? (\r\n              <button onClick={() => setExpand((prev) => !prev)}>\r\n                Read {expand ? \"less\" : \"more\"}\r\n              </button>\r\n            ) : null}\r\n          </>\r\n        )}\r\n      </div>\r\n      <footer className={styles.footer}>\r\n        <div>{formatDate(date)}</div>\r\n        {/* <div>{date}</div> */}\r\n        {noteText.length ? (\r\n          <Button\r\n            text={\"save\"}\r\n            className={styles.saveBtn}\r\n            handleClick={handleSave}\r\n          />\r\n        ) : null}\r\n        {/* <button>save</button> */}\r\n      </footer>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default Note;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,KAAK,KAAQ,gBAAgB,CACtC,MAAO,uCAAuC,CAC9C,OAASC,UAAU,KAAQ,2BAA2B,CACtD,MAAO,CAAAC,KAAK,KAAM,6BAA6B,CAC/C,MAAO,CAAAC,MAAM,KAAM,kCAAkC,CACrD,MAAO,CAAAC,MAAM,KAAM,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAExC,QAAS,CAAAC,IAAIA,CAACC,KAAK,CAAE,CACnB,KAAM,CAAEC,IAAI,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGH,KAAK,CACnC,KAAM,CAACI,MAAM,CAAEC,SAAS,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACmB,QAAQ,CAAEC,WAAW,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAE5C,KAAM,CAAAqB,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAAC,SAAS,CAAGnB,KAAK,CAACoB,mBAAmB,CAAC,UAAU,CAAC,CAEvD,GAAG,CAACD,SAAS,CAAErB,KAAK,CAACuB,KAAK,CAAC,2BAA2B,CAAC,CAEvD,GAAI,CAACL,QAAQ,CAACM,MAAM,EAAIN,QAAQ,CAACO,KAAK,CAAC,GAAG,CAAC,CAACD,MAAM,CAAG,CAAC,CACpDxB,KAAK,CAACuB,KAAK,CAAC,4CAA4C,CAAC,CAE3DG,KAAK,CAAC,iCAAiC,CAAE,CACvCC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,CAAEP,SACjB,CAAC,CACDQ,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBlB,IAAI,CAAEK,QAAQ,CACdH,KACF,CAAC,CAAC,CACFiB,MAAM,CAAE,MACV,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAK,CACd,GAAI,CAAAA,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEC,OAAO,IAAK,GAAG,CAAE,CACzBrC,KAAK,CAACqC,OAAO,CAAC,2BAA2B,CAAC,CAC5C,CAAC,IAAM,CACLrC,KAAK,CAACuB,KAAK,CAACa,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEE,OAAO,CAAC,CAC5B,CACF,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,EAAK,CACdC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChBxC,KAAK,CAACuB,KAAK,CAAC,wBAAwB,CAAC,CACvC,CAAC,CAAC,CACN,CAAC,CAED,mBACEf,KAAA,YAASmC,SAAS,CAAEvC,MAAM,CAACwC,SAAU,CAACC,KAAK,CAAE,CAAEC,eAAe,CAAE/B,KAAM,CAAE,CAAAgC,QAAA,eACtEzC,IAAA,QAAAyC,QAAA,CACG,CAAClC,IAAI,CAACW,MAAM,cACXlB,IAAA,aACE0C,KAAK,CAAE9B,QAAS,CAChB+B,QAAQ,CAAGC,CAAC,EAAK/B,WAAW,CAAC+B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC7CL,SAAS,CAAEvC,MAAM,CAACgD,QAAS,CAC5B,CAAC,cAEF5C,KAAA,CAAAE,SAAA,EAAAqC,QAAA,eACEzC,IAAA,MAAGqC,SAAS,CAAE3B,MAAM,CAAGZ,MAAM,CAACiD,QAAQ,CAAG,EAAG,CAAAN,QAAA,CACzClC,IAAI,CAACyC,SAAS,CAAC,CAAC,CAAE,GAAG,CAAC,CACtB,CAAC,CACHzC,IAAI,CAACW,MAAM,CAAG,GAAG,cAChBhB,KAAA,WAAQ+C,OAAO,CAAEA,CAAA,GAAMtC,SAAS,CAAEuC,IAAI,EAAK,CAACA,IAAI,CAAE,CAAAT,QAAA,EAAC,OAC5C,CAAC/B,MAAM,CAAG,MAAM,CAAG,MAAM,EACxB,CAAC,CACP,IAAI,EACR,CACH,CACE,CAAC,cACNR,KAAA,WAAQmC,SAAS,CAAEvC,MAAM,CAACqD,MAAO,CAAAV,QAAA,eAC/BzC,IAAA,QAAAyC,QAAA,CAAM9C,UAAU,CAACa,IAAI,CAAC,CAAM,CAAC,CAE5BI,QAAQ,CAACM,MAAM,cACdlB,IAAA,CAACH,MAAM,EACLU,IAAI,CAAE,MAAO,CACb8B,SAAS,CAAEvC,MAAM,CAACsD,OAAQ,CAC1BC,WAAW,CAAEvC,UAAW,CACzB,CAAC,CACA,IAAI,EAEF,CAAC,EACF,CAAC,CAEd,CAEA,cAAe,CAAAT,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}